---
import CodeIcon from "@/components/icons/Code.astro";
import ExpressLogo from "@/components/icons/logos/express.astro";
import NodejsLogo from "@/components/icons/logos/nodejs.astro";
import WebpackLogo from "@/components/icons/logos/webpack.astro";
import OpenjsLogo from "@/components/icons/logos/openjs.astro";
import {
  getLangFromUrl,
  useTranslations,
  useTranslatedPath,
} from "@/i18n/utils";
import ProjectsGrid from "@/components/ProjectsGrid.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);

const PROJECTS = [
  {
    title: "Express",
    slug: "express",
    icon: ExpressLogo,
  },
  {
    title: "Node.js",
    slug: "nodejs",
    icon: NodejsLogo,
  },
  {
    title: "Webpack",
    slug: "webpack",
    icon: WebpackLogo,
  },
  {
    title: "OpenJS Foundation",
    slug: "openjsf",
    icon: OpenjsLogo,
  },
];
---

<section class="flex w-full flex-col">
  <header class="mb-5 flex flex-col gap-2">
    <div class="flex items-center justify-between">
      <h2
        class="flex items-center gap-x-2 text-lg font-semibold text-foreground"
      >
        <CodeIcon class="size-5" />{t("landing.oss.title")}
      </h2>
      <a
        href="https://github.com/sponsors/bjohansebas"
        target="_blank"
        class="inline-flex items-center gap-2 rounded-lg border border-pink-500 bg-pink-500/10 px-3 py-1.5 text-sm font-medium text-pink-500 transition-colors hover:bg-pink-500/20"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="currentColor"
        >
          <path
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
          ></path>
        </svg>
        {t("landing.oss.support")}
      </a>
    </div>
    <p>{t("landing.oss.subtitle")}</p>
  </header>
  <ProjectsGrid
    class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"
    items={PROJECTS}
    basePath="/communities"
    translatePath={translatePath}
  />
</section>
